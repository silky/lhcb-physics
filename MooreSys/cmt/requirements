package MooreSys
version           v20r3p1
branches doc cmt

#=======================================================
# Don't forget the applications
#=======================================================

use  Moore               v20r3p1    Hlt
use  IndependenceTests   v1r5       Hlt
use  HltMonitor          v1r2	    Hlt   # Diego Martinez
use  Swimming            v3r0p1     Phys  # Nick Torr
use  L0App               v1r0       L0    # Rob Lambert

# Bug fixes on top of LHCb v36r1 release stack


# Declare this as a container package
apply_pattern container_package

# Allow the generation of QMTests
apply_pattern QMTest

# Allow the generation of QMTest summary
apply_pattern QMTestSummarize

macro_remove cmt_actions_constituents 'runMakeOptions'
macro_remove cmt_actions_constituents 'WriteOptions'
# dummy to avoid warnings...
tag ONLINE_OVERRULE_MOORE_SETUP
macro Moore_Dummy_ "" ONLINE_OVERRULE_MOORE_SETUP ""

private
# create files needed by online setup -- by default we use 
# the SetupMoore file generated by installing the software,
# but if ONLINE_MOORE is set we overrule this...
#tag ONLINE_OVERRULE_MOORE_SETUP
macro Create_SetupMoore_output  "$(CMTINSTALLAREA)/scripts/setupMoore_$(version).sh"
macro Create_SetupMoore_command "python ../scripts/CreateSetupMoore.py $(Create_SetupMoore_output) $(version) " \
        ONLINE_OVERRULE_MOORE_SETUP "python ../scripts/CreateSetupMoore.py $(Create_SetupMoore_output) $(version) Online v5r3" 
apply_pattern CallCommand  target=Create_SetupMoore

macro Create_RunMooreOnline_output  "$(CMTINSTALLAREA)/scripts/runMooreOnline_EFF.sh"
macro Create_RunMooreOnline_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreOnline_output) $(Create_SetupMoore_output) " 
apply_pattern CallCommand  target=Create_RunMooreOnline

macro Create_RunMooreHlt1Online_output  "$(CMTINSTALLAREA)/scripts/runMooreHlt1Online_EFF.sh"
macro Create_RunMooreHlt1Online_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreHlt1Online_output) $(Create_SetupMoore_output) Hlt1" 
apply_pattern CallCommand  target=Create_RunMooreHlt1Online

macro Create_RunMooreHlt2Online_output  "$(CMTINSTALLAREA)/scripts/runMooreHlt2Online_EFF.sh"
macro Create_RunMooreHlt2Online_command "python ../scripts/CreateRunMooreOnline_EFF.py $(Create_RunMooreHlt2Online_output) $(Create_SetupMoore_output) Hlt2" 
apply_pattern CallCommand  target=Create_RunMooreHlt2Online

# copy the TCK manifest for the _current_ release to the install area...
macro Install_TCK_Manifest_output  "$(CMTINSTALLAREA)/TCK/manifest"
macro Install_TCK_Manifest_command "python ../scripts/install_TCK_manifest.py $(HLTTCKROOT)/manifest/MOORE_$(version) $(Install_TCK_Manifest_output)"
apply_pattern CallCommand  target=Install_TCK_Manifest

macro_remove cmt_actions_constituents 'runMakeOptions' 
macro_remove cmt_actions_constituents 'WriteOptions'

end_private
