///////////////////////////////////////////////////////////////////////////////
/// Job options for Brunel for producing an rDST starting from an MDF file  ///
///             Currently using DC06 geometry and conditions                ///
///////////////////////////////////////////////////////////////////////////////
#pragma print off
#include "$BRUNELOPTS/Brunel.opts"           // Set up the processing sequences
#include "$BRUNELOPTS/rDstContent.opts"      // Define rDST content
ApplicationMgr.OutStream += { "DstWriter" }; // Comment to switch off rDST output
//Brunel.PreloadGeometry = true; // Uncomment to load geometry before 1st event
//Init.DetectorList += { "L0" }; // Uncomment to reconstruct only L0-yes events

//---------------------------------------------------------------------------
// Set up DC06 geometry, conditions, magnetic field
//---------------------------------------------------------------------------
#pragma print on
#include "$DDDBROOT/options/DC06.opts"

//---------------------------------------------------------------------------
// Additional persistency components for MDF data
//---------------------------------------------------------------------------
#include "$STDOPTS/RawDataIO.opts"

//---------------------------------------------------------------------------
// Add here any job specific options, to over-ride previously defined options
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Number of events to process, optionally skipping some events
//---------------------------------------------------------------------------
ApplicationMgr.EvtMax = -1;
//EventSelector.FirstEvent = 187;  // To skip some events 

//---------------------------------------------------------------------------
// Define Input and Output files
//---------------------------------------------------------------------------

// Monitoring histograms output
HistogramPersistencySvc.OutputFile = "00001820_00000001_5.root";

// Read-write catalog to describe input (MDF) and output (POOL) files
FileCatalog.Catalogs = { "xmlcatalog_file:$BRUNELROOT/job/NewCatalog.xml" };

// Input MDF file. This file MUST be described in the FileCatalog, with an FID
// generated externally, as it is not contained in the MDF file. If the FID is
// not provided in the Catalog, the output DST file will not contain the
// information to allow navigation back to the MDF data when reading
EventSelector.Input              = {
  "DATA='FID:94ACC0F5-09A3-DC11-8140-003048836626' SVC='LHCb::MDFSelector'" 
}; // Can use FID or LFN or PFN.

DstWriter.Output = "DATAFILE='PFN:00001820_00000001_5.rdst' TYP='POOL_ROOTTREE' OPT='REC'"; // Output rDST file
