Package: Rec/Brunel
Package Coordinator: Marco Cattaneo

Purupose: LHCb reconstruction program

! 20010605 Brunel v3r1 (MC)
   This version reads SICBMC data starting from SICBMC v245, dbase v238
   ** It is not backwards compatible with older RAWH formats and geometry **
   ** It is no longer possible to do Pileup in Brunel                     **

   New features relative to v3:
   - RICH extended tracking executed for all events
   - AXTK updated with PID information from extended tracking
   - New VELO geometry description
   - Added old SICBDST checking histograms, and dropping of banks from DST

   options/BrunelInput.opts 
     - Fix format of SpillOverSelector.Input option,
     - New option BrunelFinish.DropDSTBanks to control call to DROPBANKS

   options/Brunel.cards - Switch on RICH extended tracking for all events
>    DIGI 'RICH' 2
>    RECO 'RICH' 3

   BrunelInitialisation.cpp: 
     - initialise SICB variable NPILEUP with value from PASS bank 
       (to cope with RAWH2) - not compatible with SicbCnv PileUpAlg

   BrunelFinalisation.cpp:   Add call to DROPBANKS
   dropbanks.F:              New, to drop unwanted SICB banks from DST

   BrunelSICBMoni.cpp: New. Calls new Fortran routine SUCHECK to fill SICB
                       DST checking histograms

   BrunelMessage.opts: Use default Gaudi message format
   BrunelMoni.opts:    Add SICB DST checking histograms

   requirements:
     use dbase    v238
>          new VELO geometry description
> vsrp.cdf - modified
> vpil.cdf - modified

     use detdes   v13
>  utnext.F - utnext("MATE") returns the next free material number
>             utnext("TMED") returns the next free tracking medium number
>  utmatm.F - uses utnext("TMED") to get the next free tmed #
>  utmatn.F - uses utnext("MATE") to get the next free mat 
>
>  vrpigeom.F, vrpgeom.inc, vsvnam.inc - modified for new VELO geometry
>                                        description.
>  muginit2.F - replace GAPFRAMEPAR(IMATFR,IL,I)=NINT(Q(LP+5) with
>                       GAPFRAMEPAR(IMATFR,IR,I)=NINT(Q(LP+5))
>               IL was never set.

     use Futil    v10r1
>  src/axtrigger.F - put version by H.Dijkstra (same as in SICBDST/minidst)
>     with values tuned for SICBDST v235

     use axreclib v4r2
>  src/aximperr.F - bug fix, introduced missing dummy argument in 
>                   call to rmmlt routine (necessary to run on NT, gcorti)
>  src/axpartid.F - use results from extended tracking (R.Forty)
===============================================================================
! 20010521 Brunel v3 (MC)
  This is the first version to be used for an official LHCB production 

  This version has been restructured as two packages. Rec/Brunel contains the
  statically linked code needed to run SICBDST routines. C++ components of the
  reconstruction framework have been moved to the package Rec/BrunelKernel

  There are two subdirectories in /src:
    BrunelSicb   contains interface code to SICB (statically linked)
    ObsoleteSicb contains interface code to SICB that is no longer used
                 because SICB algorithms have been replaced by equivalent 
                 C++ algorithms.
  Files have been rename to avoid multiple . in filenames (to please nmake)

  Job options file structure has been modified relative to Brunel v1r6

  requirements use explicitly the SICB packages, no longer SICBDST

  #### Physics changes with respect to SICBDST v252 ####
  - Uses C++ tracking 
    Intermediate tracking banks (e.g. WIDG, WODG) are not produced

  - Uses C++ Calorimeter digitisation
  
  - Does not run old L1 track trigger (T1TRACK from trit1tr package)
    TTR1 bank is not produced.
===============================================================================
! 20001219 Brunel v1r6 (MC)
  requirements     - use SicbCnv v10 (spillover), SICBDST v235r3
  Brunel.Phase.cpp - fix bug in a log message (reported by O.Callot)
  BrunelZebra.inc  - increase ZEBRA COMMON block size to 12M words

! 20001120 Brunel v1r5 (MC)
  Brunel.Phase.cpp - No longer instantiates algorithms, instead it instantiates sequences
                     This introduces modifications in the BrunelOptions.txt: all algorithms
                     must now be declared as members of a sequence - see user guide for details
  requirements     - Use Gaudi release 6, SICBDST v235r2
  options          - New directory, containing structure of job options files - see user guide

! 20001003 Brunel v1r4 (Flr)
           to link a Brunel static application: gmake tag=LinuxStatic
           to run a job in static mode remove the following line from
           BrunelOptions.txt : ApplicationMgr.DLLs = {...}
 
  requirements      - use the highest version of LHCbCMT (v3r3 to define
                      package_tag pattern)
                    - use SICBDST v235 before any Gaudi packages to make sure
                      that Futio and Finclude version numbers are those set
                      by SICBDST.
                    - use SicbCnv v8r1 (to remove a fake main program)

! 20000824 Brunel v1r3 (MC)
  requirements      - use SICBDST v235
  jobOptions        - cleaned up

! 20000726 Brunel v1r2 (MC)
  requirements      - use SICBDST v234r2 and GaudiSys v5
  BrunelZebra.inc   - increase ZEBRA size to 9000000 (as for SICBDST)
  *.cpp             - Changes for GaudiSys v5 (compulsory implementation of
                      initialize(), finalize())
  BrunelPhase.h,.cpp- Remove private member m_AlgList, now exists in 
                      Algorithm base class

! 20000626 Brunel v1r1 (MC)
  requirements      - use SicbCnv v7r3, link directly to $(SICBDSTROOT)/src/sicbvers.F
  BrunelZebra.inc   - new, to over-ride size of ZEBRA COMMON (set to 8 000 000)
  GetZebraSize.F    - new, over-rides routine of same name in SicbCnv 
  Brunel.Trigger.TRIGGER.cpp - call TRLAST in finalise()

! 20000529 Brunel v1
  requirements      - use GaudiConf v1 and SICBDST v233r2 (Flr)
  job/              - new directory which contains :      (Flr)
  Brunel.job        - script to run Brunel, uses Brunel.cards and 
                      BrunelOptions.txt
  Brunel_lsf.job    - contains options for Gaudi and SICBDST,
                      does not use Brunel.cards and BrunelOptions.txt
  Brunel.cards      - SICBDST data cards file
  BrunelOptions.txt - Gaudi jobOptions file
  Brunel/             remove options.txt files (Flr)
  udinit.F          - stop the job if SICBDST cards file is not found. (Flr)
  Brunel.Init.F     - add printout of event number if DEBU card (Flr)
    
! 20000519 Brunel v1
  First version of LHCb reconstruction program.

  This version has the same functionality as SICBDST v233, containing only 
  wrapped FORTRAN code