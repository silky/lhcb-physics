//////////////////////////////////////////////////////////////////////////////
/// Job options for Boole, for data produced by Gauss v14r3 or greater and ///
/// with XmlDDDB v22r0 or greater and geometry compatible with lhcb-200402 ///
///                  and with magnetic field Field043                       ///
//////////////////////////////////////////////////////////////////////////////
#pragma print off
InitDataSeq.Members += { "MergeEventAlg/SpilloverAlg" }; // Adds Spillover
//InitDataSeq.Members += { "MergeEventAlg/LHCbkgAlg" };  // Adds LHC background
#include "$BOOLEOPTS/Boole.opts"          // Generic options for all jobs
#include "$BOOLEOPTS/BooleMoniProd.opts"  // Default monitoring for production
ApplicationMgr.OutStream += { "DigiWriter" };  // Comment to switch off output
//---------------------------------------------------------------------------
// Database specific options
//--------------------------------------------------------------------------- 
#include "$STDAQROOT/options/stDAQ-v1.opts"
#pragma print on
DetectorDataSvc.DetDbLocation = "$XMLDDDBROOT/DDDB/lhcb-200402.xml";
MagneticFieldSvc.FieldMapFile = "$FIELDMAPROOT/cdf/field043.cdf";

//---------------------------------------------------------------------------
// Add here any job specific options, to over-ride previously defined options
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Number of events to process, optionally skipping some events
//---------------------------------------------------------------------------
ApplicationMgr.EvtMax = 500;

//EventSelector.FirstEvent = 7;      // Skip some events in main input file
//SpillOverSelector.FirstEvent = 10; // Skip corresponding spillover events
//LHCBkgSelector.FirstEvent = 7;     // Skip corresponding background events

//---------------------------------------------------------------------------
// Input and output files. 
// For event data, choose either POOL or GaudiDb following these rules:
// - You can mix GaudiDb and POOL for the input files
//   (e.g. GaudiDb Spillover, POOL main event, or vice versa)
// - If any of the input files are POOL:
//   . The output file must be POOL
//   . The POOL input files must be described in PoolDbCacheSvc.InputCatalog
// - If all the input files are GaudiDb, output file can be GaudiDb or POOL
//---------------------------------------------------------------------------

HistogramPersistencySvc.OutputFile = "Pool411300.hbook";  // Monitoring histos

// POOL file catalog. Uncomment if any input files are POOL
//PoolDbCacheSvc.InputCatalog = "xmlcatalog_http://cattanem.home.cern.ch/cattanem/POOL/MyCatalog.xml";

//---------------------------------------------------------------------------
// Spillover and LHC background input
//---------------------------------------------------------------------------

// GaudiRootDb files
SpilloverSelector.Input = { 
 "DATAFILE='rfio:/castor/cern.ch/user/l/lhcbprod/test/00005301_00000002_1.oosim' TYP='ROOT' OPT='READ'" 
,"DATAFILE='rfio:/castor/cern.ch/user/l/lhcbprod/test/00005301_00000005_1.oosim' TYP='ROOT' OPT='READ'" 
}; // Gauss v15r0, XmlDDDB v22r0, evtype 61
//LHCBkgSelector.Input = { "DATAFILE='rfio:/castor/cern.ch/user/l/lhcbprod/test/00000357_00000008_5.oosim' TYP='ROOT' OPT='READ'" }; // "Maximal" LHC background. SicbToOORawh v3r1

// POOL files
//SpilloverSelector.Input = { "DATAFILE='rfio:/castor/cern.ch/user/c/cattanem/POOL/00000421_00000001_1.sim' TYP='POOL_ROOTTREE' OPT='READ'" }; // Gauss v14r1, XmlDDDB v21r0, evtype 61
//LHCBkgSelector.Input = { "DATAFILE='rfio:/castor/cern.ch/user/c/cattanem/POOL/00000357_00000008_5.sim' TYP='POOL_ROOTTREE' OPT='READ'" }; // "Maximal" LHC background. SicbToOORawh v3r1

//---------------------------------------------------------------------------
// Main event input
//---------------------------------------------------------------------------

// GaudiRootDb file
EventSelector.Input = { "DATAFILE='rfio:/castor/cern.ch/user/l/lhcbprod/test/00005300_00000005_1.oosim' TYP='ROOT' OPT='READ'" }; // Gauss v15r0, XmlDDDB v22r0, evtype 411300

// POOL file
//EventSelector.Input = { "DATAFILE='rfio:/castor/cern.ch/user/c/cattanem/POOL/00000422_00000004_1.sim' TYP='POOL_ROOTTREE' OPT='READ'" }; // Gauss v14r1, XmlDDDB v21r0, evtype 411300

//---------------------------------------------------------------------------
// Output file
//---------------------------------------------------------------------------

// GaudiRootDb. Uncomment also extra DigiWriter items!
//DigiWriter.Output = "DATAFILE='411300.oodigi' TYP='ROOT' OPT='NEW'";
//DigiWriter.ItemList += { "/Event/Raw/IT/Digits#1"};
//DigiWriter.ItemList += { "/Event/Raw/OT/Digits#1"};
//DigiWriter.ItemList += { "/Event/Raw/Velo/Clusters#1" };

// POOL
DigiWriter.Output = "DATAFILE='PFN:Pool411300.digi' TYP='POOL_ROOTTREE' OPT='REC'";
