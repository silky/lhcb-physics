///////////////////////////////////////////////////////////////////////////////
//  Job options for Boole, to create time alignment events                   //
//  This example is prepared for data produced by Gauss v24r3 or greater,    //
//  geometry lhcb-200601 and zero field (e.g. pilot run conditions)          //
///////////////////////////////////////////////////////////////////////////////
#pragma print off
#include "$BOOLEOPTS/Boole.opts"              // Generic options for all jobs
ApplicationMgr.OutStream += { "DigiWriter" }; // Comment to switch off output
InitDataSeq.Members -= { "MergeEventAlg/SpilloverAlg" }; // Remove spillover

//---------------------------------------------------------------------------
// Uncomment one or more of following lines for optional behaviour
//--------------------------------------------------------------------------- 
#include "$BOOLEOPTS/ExpertCheck.opts"     // Switch on expert check histos
//#include "$STDOPTS/ExtendedDigi.opts"      // Add MCHits to .digi file

//---------------------------------------------------------------------------
// Database specific options
//--------------------------------------------------------------------------- 
#pragma print on
DetectorDataSvc.DetDbLocation = "$XMLDDDBROOT/DDDB/lhcb-200601.xml";
MagneticFieldSvc.UseConstantField = true; // Constant (zero) field
// Switch off muon background?
//DigiMUONSeq.Members -= { "MuonBackground/MuonLowEnergy" };
//DigiMUONSeq.Members -= { "MuonBackground/MuonFlatSpillover" };

//---------------------------------------------------------------------------
// Add one or more misaligned RawEvents
//---------------------------------------------------------------------------
#include "$BOOLEOPTS/TAE-Prev1.opts"

//---------------------------------------------------------------------------
// Number of events to process, optionally skipping some events
//---------------------------------------------------------------------------
ApplicationMgr.EvtMax = 10;

//EventSelector.FirstEvent = 330;      // Skip some events in main input file
//SpilloverSelector.FirstEvent = 497; // Skip corresponding spillover events

//---------------------------------------------------------------------------
// Input and output files.
//---------------------------------------------------------------------------

HistogramPersistencySvc.OutputFile = "PilotRun.root"; // Monitoring histos

// POOL file catalogs. First one is read-write, others are read only
PoolDbCacheSvc.Catalog = {
  "xmlcatalog_file:NewCatalog.xml"
  // ,"xmlcatalog_http://cattanem.home.cern.ch/cattanem/POOL/MyCatalog.xml"
};

//---------------------------------------------------------------------------
// Main event input
//---------------------------------------------------------------------------
EventSelector.Input = {
  "DATAFILE='PFN:rfio:/castor/cern.ch/user/g/gcorti/Gauss/2006/v25r1/30000000.5k.Pilot.B_OFF.VeloClose.18Aug.sim' TYP='POOL_ROOTTREE' OPT='READ'"
}; // 450 GeV on 450 GeV pp collisions, single interactions, no beam crossing angle, beam sigma(X) = sigma(Y) = 280 microns, magnetic field OFF

//---------------------------------------------------------------------------
// Output file
//---------------------------------------------------------------------------
DigiWriter.Output = "DATAFILE='PFN:PilotRun.digi' TYP='POOL_ROOTTREE' OPT='REC'";
