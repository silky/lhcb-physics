#============================================================================
# Created    : 2006-07-21
# Maintainer : Gloria Corti, Florence Ranjard
#============================================================================
package Gauss
version v30r3

#============================================================================
#-- Structure
branches src doc options cmt job

#-- tags: Vis, GDML, Herwig, Hijing, BcVegPy, HidValley

#============================================================================

#-- Databases
use XmlDDDB             v40r0   Det   -no_auto_imports
use DDDB                v1r*    Det   -no_auto_imports
use FieldMap            v4r7          -no_auto_imports
use DecFiles            v13r10  Gen   -no_auto_imports
use ParamFiles          v6r0          -no_auto_imports
use Geant4Files		v82r0	      -no_auto_imports

#===========================================================================

#-- CMT and GaudiPolicy
use GaudiPolicy      v6r5
 
#-- External libraries taken from LCG, version defined by GaudiEnv
use RELAX v* LCG_Interfaces    -no_auto_imports
use HepMC v* LCG_Interfaces    -no_auto_imports
 
#-- Gaudi libraries (from GAUDI_v19r3)
use GaudiKernel      v22r2
use GaudiSvc         v15r3     -no_auto_imports
use GaudiAlg         v9r13     -no_auto_imports
use GaudiAud         v8r1      -no_auto_imports
use GaudiPoolDb      v2r12     -no_auto_imports
use RootHistCnv      v9r13     -no_auto_imports
use GaudiPython      v* 
 
#-- LHCb libraries (from LHCB_v22r3)
#-- Explicitly use EventSys packages to avoid dependency on unnessary packages
use GaudiConf        v10r3          -no_auto_imports
use GaudiObjDesc     v9r9           -no_auto_imports
use KernelSys        v6r4    Kernel -no_auto_imports
use DetSys           v9r4    Det    -no_auto_imports
 
use EventBase        v2r2    Event  -no_auto_imports
use MCEvent          v2r2    Event  -no_auto_imports
use GenEvent         v5r0p1  Event  -no_auto_imports
use PackedEvent      v3r1    Event  -no_auto_imports
 
use LHCbAlgs         v2r7    Kernel -no_auto_imports
use SimComponents    v2r1    Sim    -no_auto_imports
 
#===========================================================================

#== Gauss libraries

#-- Optional Hijing
macro LbHijing_use "" Linux&Hijing "LbHijing v3r1 Gen"
use $(LbHijing_use)

#-- Optional Herwig
macro LbHerwig_use "" Linux&Herwig "LbHerwig v5r1 Gen"
use $(LbHerwig_use)

#-- Optional BcVegPy
macro LbBcVegPy_use "" Linux&BcVegPy "LbBcVegPy v1r5 Gen"
use $(LbBcVegPy_use)

#-- Optional Hidden Valley
macro LbHidValley_use "" Linux&HidValley "LbHidValley v2r0 Gen"
use $(LbHidValley_use)

#-- Generator
use ParticleGuns         v3r2    Gen
use LbMIB                v1r0    Gen
use LbPythia             v5r1    Gen
use Generators           v7r1    Gen

#-- Simulation
use GiGa                 v19r0   Sim
use GiGaCnv              v18r1   Sim
use GaussTools           v13r0   Sim
use GaussAlgs		 v2r4    Sim
use GaussKine            v1r5    Sim
use GaussPhysics         v5r0    Sim
use GaussTracker         v6r0    Sim
use GaussRICH            v7r1    Sim
use GaussCalo            v9r0    Sim

#-- Optional visualisation and UI
macro GiGaVisUI_use "" Linux&Vis "GiGaVisUI v4r0 Sim"
use $(GiGaVisUI_use)

#-- Optional GDML
macro GDMLG4Writer_use "" Linux&GDML "GDMLG4Writer v2r0 Sim"
use $(GDMLG4Writer_use)

#-- Monitoring
use GaussMonitor        v4r5    Sim
use CaloMoniSim         v3r1    Calo
use VeloGauss           v2r1    Velo
use MuonMoniSim         v2r2    Muon

#===========================================================================
#== Necessary enviroment variables
#-- Set the default path for Gauss options
set  GAUSSOPTS "${GAUSSROOT}/options"

#-- Set behaviour of inelastic scattering
set AlwaysKillLeadingHadron 1

#===========================================================================
#-- Build Main Program 

application Gauss $(GAUDICONFROOT)/src/GaudiMain.cpp

application GaussHijing    $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussHerwig    $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussBcVegPy   $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussHidValley $(GAUDICONFROOT)/src/GaudiMain.cpp

macro_remove constituents "GaussHijing" Linux&Hijing "Gauss"
macro_remove constituents "GaussHerwig" Linux&Herwig "Gauss"
macro_remove constituents "GaussBcVegPy" Linux&BcVegPy "Gauss"
macro_remove constituents "GaussHidValley" Linux&HidValley "Gauss"

#===========================================================================
#-- Set macros
apply_pattern application_path 
macro Gauss_linkopts  "$(application_linkopts)"
macro_append Gauss_linkopts " -Wl,-Map,Linux.map " \
             Linux&Hijing   " -Wl,-Map,LinuxHijing.map "\
             Linux&Herwig   " -Wl,-Map,LinuxHerwig.map "\
             Linux&BcVegPy  " -Wl,-Map,LinuxBcVegPy.map "\
             Linux&HidValley " -Wl,-Map,LinuxHidValley.map "\
             WIN32          ""

#-- Make just executable "visible" 
path_remove    PATH  "/Gauss/"
path_append    PATH  "${GAUSSROOT}/${BINDIR}"

#-- For visualization make appropriate engine visible (DAWN)
path_remove    PATH  "" Linux&Vis "/DAWN/"
path_append    PATH  "" Linux&Vis "${OSC_release_area}/DAWN/bin/Linux"

#===========================================================================
#-- Set usefull alias : for tests only - use vXXXXXX.opts for geometry
#                       dependent options
alias gauss " ${GAUSSROOT}/${BINDIR}/Gauss.exe ${GAUSSOPTS}/Gauss.opts "
alias gaussvis " ${GAUSSROOT}/${BINDIR}/Gauss.exe ${GAUSSOPTS}/GaussVis.opts "
alias gausshijing " ${GAUSSROOT}/${BINDIR}/GaussHijing.exe ${GAUSSOPTS}/Gauss.opts "
alias gaussherwig " ${GAUSSROOT}/${BINDIR}/GaussHerwig.exe ${GAUSSOPTS}/Gauss.opts "
alias gaussbcvegy " ${GAUSSROOT}/${BINDIR}/GaussBcVeqPy.exe ${GAUSSOPTS}/Gauss.opts "
alias gausshidvalley " ${GAUSSROOT}/${BINDIR}/GaussHidValley.exe ${GAUSSOPTS}/Gauss.opts "
