#============================================================================
# Created    : 2006-07-21
# Maintainer : Gloria Corti, Florence Ranjard
#============================================================================
package Gauss
version v30r4

#============================================================================
#-- Structure
branches src doc options cmt job

#-- tags: Vis, GDML, Herwig, Hijing, BcVegPy, HidValley

#============================================================================

#-- Databases
#use XmlDDDB             v40r0   Det   -no_auto_imports
use DDDB                v1r*    Det   -no_auto_imports
use ParamFiles          v6r1          -no_auto_imports
use FieldMap            v4r7          -no_auto_imports
use DecFiles            v13r13  Gen   -no_auto_imports
use Geant4Files		v82r0	      -no_auto_imports

#===========================================================================

# Packages needed to compile and link the application
use GaudiConf          v*                   -no_auto_imports
use GaudiKernel        v*
 
# Packages needed to resolve external dependencies at run time
use Python             v*    LCG_Interfaces -no_auto_imports
use HepMC              v*    LCG_Interfaces -no_auto_imports
 
# From GAUDI project
use GaudiSvc           v*                   -no_auto_imports
use GaudiAud           v*                   -no_auto_imports
use GaudiPoolDb        v*                   -no_auto_imports
use GaudiPython        v*                   -no_auto_imports 
use RootHistCnv        v*                   -no_auto_imports
 
# From LHCB project
use KernelSys          v*     Kernel         -no_auto_imports
use DetSys             v*     Det            -no_auto_imports
use LHCbAlgs           v*     Kernel         -no_auto_imports
use SimComponents      v*     Sim            -no_auto_imports
 
#===========================================================================

# From GAUSS project

#-- Optional Hijing
macro LbHijing_use "" Linux&Hijing "LbHijing v* Gen"
use $(LbHijing_use)

#-- Optional Herwig
macro LbHerwig_use "" Linux&Herwig "LbHerwig v* Gen"
use $(LbHerwig_use)

#-- Optional BcVegPy
macro LbBcVegPy_use "" Linux&BcVegPy "LbBcVegPy v* Gen"
use $(LbBcVegPy_use)

#-- Optional Hidden Valley
macro LbHidValley_use "" Linux&HidValley "LbHidValley v* Gen"
use $(LbHidValley_use)

#-- Optional AlpGen
macro LbAlpGen_use "" Linux&AlpGen "LbAlpGen v* Gen"
use $(LbAlpGen_use)

#-- Optional Pythia8
macro LbPythia8_use "" Linux&Pythia8 "LbPyhia8 v* Gen"
use $(LbPythia8_use) 

#-- Generator
use ParticleGuns         v*    Gen
use LbMIB                v*    Gen
use LbPythia             v*    Gen
use Generators           v*    Gen

#-- Simulation
use GiGaCnv              v*    Sim
use GaussTools           v*    Sim
use GaussAlgs		 v*    Sim
use GaussKine            v*    Sim
use GaussPhysics         v*    Sim
use GaussTracker         v*    Sim
use GaussRICH            v*    Sim
use GaussCalo            v*    Sim

#-- Optional visualisation and UI
macro GiGaVisUI_use "" Linux&Vis "GiGaVisUI v* Sim"
use $(GiGaVisUI_use)

#-- Optional GDML
macro GDMLG4Writer_use "" Linux&GDML "GDMLG4Writer v* Sim"
use $(GDMLG4Writer_use)

#-- Monitoring
use GaussMonitor        v*    Sim
use CaloMoniSim         v*    Calo
use VeloGauss           v*    Velo
use MuonMoniSim         v*    Muon

#===========================================================================
#== Necessary enviroment variables
#-- Set the default path for Gauss options
set  GAUSSOPTS "${GAUSSROOT}/options"

#-- Set behaviour of inelastic scattering
set AlwaysKillLeadingHadron 1

#===========================================================================
#-- Build Main Program 

application Gauss $(GAUDICONFROOT)/src/GaudiMain.cpp

application GaussHijing    $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussHerwig    $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussBcVegPy   $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussHidValley $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussAlpGen    $(GAUDICONFROOT)/src/GaudiMain.cpp
application GaussPythia8   $(GAUDICONFROOT)/src/GaudiMain.cpp

macro_remove constituents "GaussHijing"    Linux&Hijing "Gauss"
macro_remove constituents "GaussHerwig"    Linux&Herwig "Gauss"
macro_remove constituents "GaussBcVegPy"   Linux&BcVegPy "Gauss"
macro_remove constituents "GaussHidValley" Linux&HidValley "Gauss"
macro_remove constituents "GaussAlpGen"    Linux&AlpGen "Gauss"
macro_remove constituents "GaussPythia8"   Linux&Pythia8 "Gauss"

#===========================================================================
#-- Set macros
apply_pattern application_path 
macro Gauss_linkopts  "$(application_linkopts)"
macro_append Gauss_linkopts " -Wl,-Map,Linux.map " \
             Linux&Hijing   " -Wl,-Map,LinuxHijing.map "\
             Linux&Herwig   " -Wl,-Map,LinuxHerwig.map "\
             Linux&BcVegPy  " -Wl,-Map,LinuxBcVegPy.map "\
             Linux&HidValley " -Wl,-Map,LinuxHidValley.map "\
             WIN32          ""

#-- Make just executable "visible" 
path_remove    PATH  "/Gauss/"
path_append    PATH  "${GAUSSROOT}/${BINDIR}"

#-- For visualization make appropriate engine visible (DAWN)
path_remove    PATH  "" Linux&Vis "/DAWN/"
path_append    PATH  "" Linux&Vis "${OSC_release_area}/DAWN/bin/Linux"

#===========================================================================
#-- Alias for exacutable have been removed: use instead script
#    SetupProject Gauss <version>
#   that includes the binary directory in the PATH so that you can type
#    Gauss.exe (GaussHerwig.exe) 
