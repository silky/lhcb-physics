<?xml version="1.0" ?>
<!DOCTYPE extension
  PUBLIC '-//QM/2.4.1/Extension//EN'
  'http://www.codesourcery.com/qm/dtds/2.4.1/-//qm/2.4.1/extension//en.dtd'>
<extension class="GaudiTest.GaudiExeTest" kind="test">
<argument name="program">
	<text>gaudirun.py</text>
</argument>
<argument name="target_group">
	<text>.*</text>
</argument>
<argument name="timeout">
	<integer>1800</integer>
</argument>
<argument name="reference">
	<text>$GAUSSROOT/tests/refs/testGauss-config-10000000.ref</text>
</argument>
<argument name="error_reference">
	<text>$GAUSSROOT/tests/refs/testGauss-err.ref</text>
</argument>
<argument name="stdout">
	<text/>
</argument>
<argument name="prerequisites">
	<set/>
</argument>
<argument name="args">
	<set>
		<text>$GAUSSOPTS/Gauss-2011.py</text>
		<text>$DECFILESROOT/options/10000000.py</text>
		<text>$LBPYTHIAROOT/options/Pythia.py</text>
		<text>$GAUSSROOT/tests/options/testGauss-NoOutput.py</text>
		<text>$GAUSSROOT/tests/options/testGauss-config-defaults.py</text>
	</set>
</argument>
<argument name="exit_code">
	<integer>0</integer>
</argument>
<argument name="use_temp_dir">
	<enumeral>false</enumeral>
</argument>
<argument name="environment">
	<set/>
</argument>
<argument name="unsupported_platforms">
	<set/>
</argument>
<argument name="workdir">
	<text/>
</argument>
<argument name="stderr">
	<text/>
</argument>
<argument name="options">
	<text/>
</argument>
<argument name="validator"><text>

preprocessor = (normalizeExamples + 
     RegexpReplacer(when = "Connected to database",
         orig = r"(\"sqlite_file:)(.*/)([\w.]+/[0-9A-Z_]{1,8}\")",
         repl = r"\1\3") + 
     LineSkipper(["INFO Using TAG", "TimingAuditor.T", "ToolSvc.SequencerTime",
                  "Gauss-"]) + 
     LineSkipper(["INFO Connected to database"]) + 
     LineSkipper(["INFO Disconnect from database after being idle"]) +
     LineSkipper(["Generation.FixedLumi"]) + 
     LineSkipper(["GaussGen.GaussGenMemory"]) + 
     LineSkipper(["PDFset"]) + 
     LineSkipper(["ChronoStatSvc.f...   INFO  from GaudiConf.QMTesService finalized succes"])  + 
     LineSkipper(["RFileCnv                   INFO opening Root file"]) + 
     LineSkipper(["HistogramDataSvc           INFO Added stream file"]) +
     LineSkipper(regexps=[r"GiGaGeo.HpdSiliconSen...\s*DEBUG Now in ProcessHits().*",
                         r"MainEventGaussSim\s*DEBUG event.*",
                         r"GaussGen\s*DEBUG event.*"]) + 
     RegexpReplacer(when = "Loading simulation attributes",
         orig = r"(\")(.*/)([\w.]+\")",
         repl = r"\1.../\3"))

validateWithReference(preproc = preprocessor)

</text></argument>
<argument name="resources">
	<set/>
</argument>
<argument name="stdin">
	<text/>
</argument>
</extension>
