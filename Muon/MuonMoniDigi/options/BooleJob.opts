///////////////////////////////////////////////////////////////////////////////
//  Job options for Boole, for data produced by Gauss v19r3 or greater and   //
//  geometry lhcb-200412 (Rich1 EDR, Rotated Rich2, TT KLM layout, new Velo) //
///////////////////////////////////////////////////////////////////////////////
#pragma print off
InitDataSeq.Members += { "MergeEventAlg/SpilloverAlg" }; // Adds Spillover
#include "$MUONMONIDIGIROOT/options/Boole.opts"          // Generic options for all jobs
#include "$BOOLEOPTS/BooleMoniProd.opts"  // Default monitoring for production
ApplicationMgr.OutStream += { "DigiWriter" };  // Comment to switch off output
//---------------------------------------------------------------------------
// Database specific options
//--------------------------------------------------------------------------- 
#include "$STDAQROOT/options/stDAQ-v2.opts"
#pragma print on
//DetectorDataSvc.DetDbLocation = "$XMLDDDBROOT/DDDB/lhcb-200412.xml";
DetectorDataSvc.DetDbLocation = "/afs/cern.ch/lhcb/group/davinci/vol1/gcorti/GAUSS/Det/XmlDDDB/v24r0-muon/DDDB/lhcb-shift-200504.xml";
// Boole.PreloadGeometry = true;

//---------------------------------------------------------------------------
// Add here any job specific options, to over-ride previously defined options
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Number of events to process, optionally skipping some events
//---------------------------------------------------------------------------
ApplicationMgr.EvtMax = 1000;

//EventSelector.FirstEvent = 7;      // Skip some events in main input file
//SpillOverSelector.FirstEvent = 10; // Skip corresponding spillover events

//---------------------------------------------------------------------------
// Input and output files. 
//---------------------------------------------------------------------------

HistogramPersistencySvc.OutputFile = "0412-11144100.root"; // Monitoring histos

// POOL file catalogs. First one is read-write, others are read only
PoolDbCacheSvc.Catalog = {
  "xmlcatalog_file:NewCatalog.xml"
 ,"xmlcatalog_http://cattanem.home.cern.ch/cattanem/POOL/MyCatalog.xml"
};

//---------------------------------------------------------------------------
// Spillover
//---------------------------------------------------------------------------
SpilloverSelector.Input = { 
   "DATAFILE='PFN:castor:/castor/cern.ch/user/g/gcorti/Gauss/v19r3/30000000.500ev.1.sim' TYP='POOL_ROOT' OPT='READ'" 
,  "DATAFILE='PFN:castor:/castor/cern.ch/user/g/gcorti/Gauss/v19r3/30000000.500ev.2.sim' TYP='POOL_ROOT' OPT='READ'" 
};  // Minimum bias events, with Gauss v19r3


//---------------------------------------------------------------------------
// Main event input
//---------------------------------------------------------------------------
EventSelector.Input = {
  "DATAFILE='PFN:castor:/castor/cern.ch/user/g/gcorti/Gauss/v19r4/30000000.1000ev.mu-shift.sim' TYP='POOL_ROOTTREE' OPT='READ'"
};
//   "DATAFILE='PFN:castor:/castor/cern.ch/user/a/asarti/Gauss.sim' TYP='POOL_ROOT' OPT='READ'" 


ApplicationMgr.ExtSvc += { "NTupleSvc" };
NTupleSvc.Output      += { "FILE1 DATAFILE='/afs/cern.ch/user/a/asarti/scratch0/BooleDigitMoni.root' TYP='ROOT' OPT='NEW'" } ;
MuDigitMoni.OutputLevel = 3;
MuDigitMoni.DetailedMonitor = true;
MuDigitMoni.fullDetail = true;

//---------------------------------------------------------------------------
// Output file
//---------------------------------------------------------------------------
DigiWriter.Output = "DATAFILE='PFN:castor:/castor/cern.ch/user/a/asarti/Boole.digi' TYP='POOL_ROOTTREE' OPT='REC'";
